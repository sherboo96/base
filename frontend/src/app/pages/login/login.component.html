<div class="flex items-center justify-center min-h-screen py-8">
  <!-- Loading Component -->
  <app-loading></app-loading>
  
  <!-- Language Switcher -->
  <div class="absolute top-4 right-4 z-50">
    <app-language-switcher></app-language-switcher>
  </div>
  
  <div
    class="flex flex-col md:flex-row bg-white rounded-xl shadow-2xl overflow-hidden w-full max-w-5xl min-h-[70vh]"
  >
    <!-- Left Section -->
    <div class="flex flex-col items-center justify-center p-6 md:w-1/2">
      <img
        src="assets/images/logo.png"
        alt="Ministry of Oil Logo"
        class="h-36 mb-4"
      />
      <h2 class="text-2xl font-bold text-[#c9ae81] mb-2 flex items-center">
        {{ 'login.title' | translate }}
        <span class="ml-2 rtl:ml-0 rtl:mr-2">ðŸ‘‹</span>
      </h2>
      <p class="text-gray-500 text-sm mb-4 text-center max-w-xs">
        {{ 'login.subtitle' | translate }}
      </p>

      <form
        [formGroup]="loginForm"
        (ngSubmit)="onLogin()"
        class="w-full space-y-5"
      >
        <!-- Username Input -->
        <div class="form-group">
          <label
            for="username"
            class="form-label"
            [ngClass]="{
              'text-red-600': hasError('username'),
              'text-green-600': usernameControl?.valid && usernameControl?.touched && !hasError('username')
            }"
          >
            {{ 'login.username' | translate }}
          </label>
          <div class="input-wrapper" [attr.dir]="currentLang === 'ar' ? 'rtl' : 'ltr'">
            <div class="input-icon-left">
              <i 
                class="fas fa-user"
                [ngClass]="{
                  'text-red-500': hasError('username'),
                  'text-green-500': usernameControl?.valid && usernameControl?.touched && !hasError('username'),
                  'text-gray-400': !hasError('username') && (!usernameControl?.touched || !usernameControl?.valid)
                }"
              ></i>
            </div>
            <input
              type="text"
              id="username"
              formControlName="username"
              class="form-input"
              [ngClass]="{
                'input-error': hasError('username'),
                'input-success': usernameControl?.valid && usernameControl?.touched && !hasError('username')
              }"
              [placeholder]="'login.usernamePlaceholder' | translate"
              (blur)="usernameControl?.markAsTouched()"
            />
            <!-- Validation Icon Right -->
            <div class="input-icon-right">
              <i
                *ngIf="hasError('username')"
                class="fas fa-times-circle text-red-500 validation-icon"
              ></i>
              <i
                *ngIf="usernameControl?.valid && usernameControl?.touched && !hasError('username')"
                class="fas fa-check-circle text-green-500 validation-icon"
              ></i>
            </div>
          </div>
          <!-- Error Message -->
          <div
            *ngIf="hasError('username')"
            class="error-message"
          >
            <i class="fas fa-exclamation-circle mr-1 rtl:mr-0 rtl:ml-1"></i>
            {{ getErrorMessage("username") }}
          </div>
          <!-- Success Message -->
          <div
            *ngIf="usernameControl?.valid && usernameControl?.touched && !hasError('username')"
            class="success-message"
          >
            <i class="fas fa-check-circle mr-1 rtl:mr-0 rtl:ml-1"></i>
            {{ 'login.looksGood' | translate }}
          </div>
        </div>

        <!-- Password Input -->
        <div class="form-group">
          <label
            for="password"
            class="form-label"
            [ngClass]="{
              'text-red-600': hasError('password'),
              'text-green-600': passwordControl?.valid && passwordControl?.touched && !hasError('password')
            }"
          >
            {{ 'login.password' | translate }}
          </label>
          <div class="input-wrapper" [attr.dir]="currentLang === 'ar' ? 'rtl' : 'ltr'">
            <div class="input-icon-left">
              <i 
                class="fas fa-lock"
                [ngClass]="{
                  'text-red-500': hasError('password'),
                  'text-green-500': passwordControl?.valid && passwordControl?.touched && !hasError('password'),
                  'text-gray-400': !hasError('password') && (!passwordControl?.touched || !passwordControl?.valid)
                }"
              ></i>
            </div>
            <input
              type="password"
              id="password"
              formControlName="password"
              class="form-input"
              [ngClass]="{
                'input-error': hasError('password'),
                'input-success': passwordControl?.valid && passwordControl?.touched && !hasError('password')
              }"
              [placeholder]="'login.passwordPlaceholder' | translate"
              (blur)="passwordControl?.markAsTouched()"
            />
            <!-- Validation Icon Right -->
            <div class="input-icon-right">
              <i
                *ngIf="hasError('password')"
                class="fas fa-times-circle text-red-500 validation-icon"
              ></i>
              <i
                *ngIf="passwordControl?.valid && passwordControl?.touched && !hasError('password')"
                class="fas fa-check-circle text-green-500 validation-icon"
              ></i>
            </div>
          </div>
          <!-- Error Message -->
          <div
            *ngIf="hasError('password')"
            class="error-message"
          >
            <i class="fas fa-exclamation-circle mr-1 rtl:mr-0 rtl:ml-1"></i>
            {{ getErrorMessage("password") }}
          </div>
          <!-- Success Message -->
          <div
            *ngIf="passwordControl?.valid && passwordControl?.touched && !hasError('password')"
            class="success-message"
          >
            <i class="fas fa-check-circle mr-1 rtl:mr-0 rtl:ml-1"></i>
            {{ 'login.looksGood' | translate }}
          </div>
        </div>

        <div class="flex items-center">
          <input
            type="checkbox"
            id="remember-me"
            formControlName="rememberMe"
            class="w-4 h-4 border-gray-300 rounded focus:ring-[#c9ae81] checked:bg-[#c9ae81] checked:border-[#c9ae81]"
          />
          <label for="remember-me" class="ml-2 rtl:ml-0 rtl:mr-2 text-sm text-gray-600"
            >{{ 'login.rememberMe' | translate }}</label
          >
        </div>

        <button
          type="submit"
          [disabled]="loginForm.invalid && formSubmitted"
          [ngClass]="{
            'opacity-70 cursor-not-allowed':
              loginForm.invalid && formSubmitted
          }"
          class="w-full py-2.5 px-4 bg-gradient-to-r from-[#c9ae81] to-[#d4bc92] text-white rounded-lg shadow-md hover:from-[#b79c70] hover:to-[#c4ab7e] hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#c9ae81]/30 transform hover:-translate-y-0.5 flex justify-center items-center"
        >
          <span>{{ 'login.signIn' | translate }}</span>
        </button>

        <div class="text-xs text-gray-500 mt-2">
          <p class="text-center">
            <i class="fas fa-shield-alt mr-1 rtl:mr-0 rtl:ml-1 text-[#c9ae81]"></i>
            {{ 'login.securityMessage' | translate }}
          </p>
        </div>
      </form>
    </div>

    <!-- Right Section -->
    <div class="hidden md:block md:w-1/2">
      <img
        src="assets/images/moo.png"
        alt="Ministry of Oil"
        class="h-full w-full object-cover"
      />
    </div>
  </div>
</div>
