<div class="flex flex-col h-full max-h-[90vh]">
  <!-- Header -->
  <div class="flex-shrink-0 px-6 pt-6 pb-4 border-b border-gray-200">
    <div class="flex justify-between items-start">
      <div class="flex-1">
        <h2 class="text-2xl font-bold text-gray-900 font-poppins mb-1">
          {{ 'eventSession.enrollments' | translate }}
        </h2>
        <p class="text-sm text-gray-600 font-poppins">
          {{ sessionTitle }}
        </p>
        <p class="text-xs text-gray-500 mt-1 font-poppins">
          {{ 'eventSession.enrollmentsDescription' | translate }}
        </p>
      </div>
      <button
        (click)="close()"
        class="text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg"
        [title]="'common.close' | translate"
      >
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>
  </div>

  <!-- Content -->
  <div class="flex-1 overflow-y-auto px-6 py-4">

    <div *ngIf="isLoading" class="flex justify-center items-center py-16">
      <div class="text-center">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-accent mb-4"></div>
        <p class="text-gray-600 font-poppins">{{ 'common.loading' | translate }}</p>
      </div>
    </div>

    <div *ngIf="!isLoading && enrollments.length === 0" class="text-center py-16">
      <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <i class="fas fa-users text-gray-400 text-2xl"></i>
      </div>
      <p class="text-gray-600 font-poppins font-medium">{{ 'eventSession.noEnrollments' | translate }}</p>
    </div>

    <div *ngIf="!isLoading && enrollments.length > 0" class="overflow-x-auto rounded-lg border border-gray-200">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
          <tr>
            <th class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'eventSession.enrollmentName' | translate }}
            </th>
            <th class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'eventSession.enrollmentPhone' | translate }}
            </th>
            <th class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'eventSession.enrollmentEmail' | translate }}
            </th>
            <th class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'eventSession.enrollmentOrganization' | translate }}
            </th>
            <th class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'eventSession.enrollmentBarcode' | translate }}
            </th>
            <th class="px-5 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'eventSession.enrollmentStatus' | translate }}
            </th>
            <th class="px-5 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider font-poppins">
              {{ 'common.actions' | translate }}
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <tr *ngFor="let enrollment of enrollments" class="hover:bg-gray-50 transition-colors">
            <td class="px-5 py-4">
              <div class="text-sm font-semibold text-gray-900 font-poppins">{{ enrollment.name }}</div>
              <div *ngIf="enrollment.nameAr" class="text-xs text-gray-500 mt-1 font-poppins" dir="rtl">
                {{ enrollment.nameAr }}
              </div>
            </td>
            <td class="px-5 py-4 whitespace-nowrap">
              <div class="text-sm text-gray-900 font-poppins">{{ enrollment.phone }}</div>
            </td>
            <td class="px-5 py-4 whitespace-nowrap">
              <div class="text-sm text-gray-900 font-poppins">{{ enrollment.email ?? '-' }}</div>
            </td>
            <td class="px-5 py-4 whitespace-nowrap">
              <div class="text-sm text-gray-900 font-poppins">{{ enrollment.eventOrganization?.name || '-' }}</div>
            </td>
            <td class="px-5 py-4 whitespace-nowrap">
              <div class="text-sm font-mono text-gray-900 font-poppins bg-gray-50 px-2 py-1 rounded inline-block">
                {{ enrollment.barcode || '-' }}
              </div>
            </td>
            <td class="px-5 py-4 whitespace-nowrap">
              <div class="flex flex-col gap-2">
                <span
                  class="inline-flex items-center px-3 py-1 text-xs font-bold rounded-full"
                  [ngClass]="getStatusBadgeClass(enrollment.status)"
                >
                  {{ enrollment.status || 'Pending' }}
                </span>
                <div *ngIf="enrollment.approvalEmailSent" class="flex items-center gap-1 text-xs text-green-600 font-poppins">
                  <i class="fas fa-check-circle"></i>
                  <span>{{ 'eventSession.emailSent' | translate }}</span>
                </div>
              </div>
            </td>
            <td class="px-5 py-4 whitespace-nowrap text-right">
              <div class="flex items-center justify-end gap-2">
                <button
                  *ngIf="enrollment.status !== 'Approved'"
                  (click)="approveEnrollment(enrollment)"
                  class="inline-flex items-center justify-center w-8 h-8 text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-all duration-200 hover:scale-110"
                  [title]="'eventSession.approveEnrollment' | translate"
                >
                  <i class="fas fa-check text-sm"></i>
                </button>
                <span *ngIf="enrollment.status === 'Approved'" class="inline-flex items-center justify-center w-8 h-8 text-green-600 bg-green-50 rounded-lg">
                  <i class="fas fa-check-circle text-sm"></i>
                </span>
                <button
                  (click)="deleteEnrollment(enrollment)"
                  class="inline-flex items-center justify-center w-8 h-8 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-all duration-200 hover:scale-110"
                  [title]="'common.delete' | translate"
                >
                  <i class="fas fa-trash text-sm"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

