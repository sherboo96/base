# Event Registration Management - Complete Implementation Plan

## Overview
This document outlines the complete implementation of event registration management features in the mobile app.

## Features to Implement

### 1. Enhanced Registration Row View
- **Status Badge** (Draft/Approved/Rejected) with color coding
- **Email Status Indicators** (3 types of emails)
- **Seat Number Display** with edit button
- **Updated By Information** (who and when)
- **Action Buttons** (Approve, Reject, Set Seat, Send Final Approval)
- **Check-in/Check-out Status** (existing, keep as is)

### 2. Status Filter
- Filter dropdown/segmented control
- Options: All, Draft, Approved, Rejected
- Update groupedRegistrations based on filter

### 3. Seat Number Dialog
- Text input for seat number
- Save/Cancel buttons
- Error handling for duplicate seats

### 4. Confirmation Dialogs
- Approve confirmation
- Reject confirmation
- Send final approval confirmation

### 5. ViewModel Updates
- Add approve/reject/setSeat/sendFinalApproval functions
- Add loading states for each action
- Add error handling
- Reload registrations after actions

## Implementation Steps

### Step 1: Update ViewModel (EventRegistrationsViewModel)
Add new @Published properties:
- `isApproving: Bool`
- `isRejecting: Bool`
- `isUpdatingSeat: Bool`
- `isSendingFinalApproval: Bool`
- `statusFilter: EventRegistrationStatus?`

Add new functions:
```swift
func approveRegistration(id: Int) async
func rejectRegistration(id: Int) async  
func updateSeatNumber(id: Int, seatNumber: String?) async
func sendFinalApprovalEmail(id: Int) async
```

### Step 2: Add State Variables to EventRegistrationsView
```swift
@State private var statusFilter: EventRegistrationStatus? = nil
@State private var showSeatNumberDialog = false
@State private var selectedRegistrationForSeat: EventRegistration? = nil
@State private var seatNumberInput = ""
@State private var showApproveConfirmation = false
@State private var showRejectConfirmation = false
@State private var showFinalApprovalConfirmation = false
@State private var selectedRegistrationForAction: EventRegistration? = nil
```

### Step 3: Update groupedRegistrations
Add status filtering logic to the computed property

### Step 4: Create Status Filter UI
Segmented picker or horizontal scroll view with filter chips

### Step 5: Replace RegistrationRowView
Create new enhanced view with all features

### Step 6: Add Dialogs
- Seat number input dialog
- Confirmation alerts

## Color Coding

### Status Colors:
- **Draft**: Orange (#FF9500)
- **Approved**: Green (#34C759)
- **Rejected**: Red (#FF3B30)

### Email Status:
- **Sent**: Green checkmark
- **Not Sent**: Gray circle

## UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Name]                    [Status Badge]â”‚
â”‚ [Arabic Name]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“§ Email                                â”‚
â”‚ ğŸ« Barcode                              â”‚
â”‚ ğŸ’º Seat: [Number] [Edit]               â”‚
â”‚ ğŸ¢ Organization                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Email Status:                           â”‚
â”‚ âœ… Registration Email Sent              â”‚
â”‚ âœ… Confirmation Email Sent              â”‚
â”‚ â­• Final Approval Not Sent              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Updated by: [User] on [Date]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Approve] [Reject] [Send Final Approval]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Next Steps
1. Implement ViewModel functions
2. Add state variables
3. Create enhanced row view
4. Add filter UI
5. Add dialogs
6. Test all workflows
